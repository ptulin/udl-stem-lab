(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[941],{7433:function(e,s,t){Promise.resolve().then(t.bind(t,8815))},8815:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return i}});var a=t(7437),r=t(2265),l=t(9376),n=t(3548),d=t(6795);function i(){let e=(0,l.useRouter)(),[s,t]=(0,r.useState)([]),[i,o]=(0,r.useState)(null);(0,d.TU)(),(0,r.useEffect)(()=>{c()},[]);let c=()=>{let e=(0,n.I)("dummy").getAllSessionsEvents(),s=new Map;e.forEach(e=>{s.has(e.sessionId)||s.set(e.sessionId,[]),s.get(e.sessionId).push(e)});let a=[];s.forEach((e,s)=>{var t,r;let l=e.sort((e,s)=>e.timestamp-s.timestamp),n=(null===(t=l[0])||void 0===t?void 0:t.timestamp)||0,d=(null===(r=l[l.length-1])||void 0===r?void 0:r.timestamp)||n,i=e.filter(e=>"hint_requested"===e.type).length,o={};e.forEach(e=>{var s,t;"sim_action"===e.type&&(null===(s=e.data)||void 0===s||s.topology),"check_answered"!==e.type||(null===(t=e.data)||void 0===t?void 0:t.correct)||(o.incorrect_answer=(o.incorrect_answer||0)+1)});let c=e.filter(e=>"check_answered"===e.type),m=c.filter(e=>{var s;return null===(s=e.data)||void 0===s?void 0:s.correct}).length,h=c.length,u=h>0?m/h:0;a.push({sessionId:s,events:l,timeOnTask:(d-n)/1e3/60,hintRequests:i,errorTypes:o,mastery:{obj1:.9*u,obj2:.95*u,obj3:u},lastActivity:d})}),a.sort((e,s)=>s.lastActivity-e.lastActivity),t(a)},m=s.find(e=>e.sessionId===i);return(0,a.jsx)("main",{className:"min-h-screen p-4 bg-gradient-to-b from-purple-50 to-white",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-purple-900",children:"Teacher Dashboard"}),(0,a.jsx)("button",{onClick:()=>e.push("/"),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400","aria-label":"Back to home",children:"Back to Home"})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Student Overview"}),0===s.length?(0,a.jsx)("p",{className:"text-gray-600",children:"No student data available yet. Start a lab session as a student to see data here."}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full border-collapse",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-100",children:[(0,a.jsx)("th",{className:"border p-2 text-left",children:"Session ID"}),(0,a.jsx)("th",{className:"border p-2 text-left",children:"Time on Task (min)"}),(0,a.jsx)("th",{className:"border p-2 text-left",children:"Hint Requests"}),(0,a.jsx)("th",{className:"border p-2 text-left",children:"Mastery (Obj 1)"}),(0,a.jsx)("th",{className:"border p-2 text-left",children:"Mastery (Obj 2)"}),(0,a.jsx)("th",{className:"border p-2 text-left",children:"Mastery (Obj 3)"}),(0,a.jsx)("th",{className:"border p-2 text-left",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:s.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsxs)("td",{className:"border p-2 font-mono text-sm",children:[e.sessionId.slice(0,20),"..."]}),(0,a.jsx)("td",{className:"border p-2",children:e.timeOnTask.toFixed(1)}),(0,a.jsx)("td",{className:"border p-2",children:e.hintRequests}),(0,a.jsxs)("td",{className:"border p-2",children:[(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"".concat(100*e.mastery.obj1,"%")}})}),(0,a.jsxs)("span",{className:"text-xs text-gray-600",children:[Math.round(100*e.mastery.obj1),"%"]})]}),(0,a.jsxs)("td",{className:"border p-2",children:[(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"".concat(100*e.mastery.obj2,"%")}})}),(0,a.jsxs)("span",{className:"text-xs text-gray-600",children:[Math.round(100*e.mastery.obj2),"%"]})]}),(0,a.jsxs)("td",{className:"border p-2",children:[(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"".concat(100*e.mastery.obj3,"%")}})}),(0,a.jsxs)("span",{className:"text-xs text-gray-600",children:[Math.round(100*e.mastery.obj3),"%"]})]}),(0,a.jsx)("td",{className:"border p-2",children:(0,a.jsx)("button",{onClick:()=>o(e.sessionId),className:"px-3 py-1 bg-purple-600 text-white rounded text-sm hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-300","aria-label":"View details for session ".concat(e.sessionId),children:"View Details"})})]},e.sessionId))})]})})]}),m&&(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold",children:"Session Timeline"}),(0,a.jsx)("button",{onClick:()=>o(null),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400","aria-label":"Close details",children:"Close"})]}),(0,a.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:m.events.map((e,s)=>(0,a.jsxs)("div",{className:"p-3 bg-gray-50 rounded border border-gray-200 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-1",children:[(0,a.jsx)("span",{className:"font-semibold",children:e.type}),(0,a.jsx)("span",{className:"text-gray-500 text-xs",children:new Date(e.timestamp).toLocaleTimeString()})]}),e.data&&Object.keys(e.data).length>0&&(0,a.jsx)("div",{className:"text-gray-600 text-xs mt-1",children:JSON.stringify(e.data,null,2)})]},s))}),(0,a.jsxs)("div",{className:"mt-4 p-4 bg-yellow-50 rounded border border-yellow-200",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"Common Error Types"}),(0,a.jsxs)("div",{className:"space-y-1",children:[Object.entries(m.errorTypes).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsxs)("strong",{children:[s,":"]})," ",t," occurrence",1!==t?"s":""]},s)}),0===Object.keys(m.errorTypes).length&&(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"No errors recorded"})]})]})]})]})})}},9376:function(e,s,t){"use strict";var a=t(5475);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}})}},function(e){e.O(0,[27,971,117,744],function(){return e(e.s=7433)}),_N_E=e.O()}]);